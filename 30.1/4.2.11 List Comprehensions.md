# **4.2.11 List Comprehensions**

##  The Big Idea
List comprehensions are a "power user" feature in Python. They allow you to create a new list by transforming or filtering another sequence in a **single, readable line**.
* Think of a list comprehension as a "shortcut" for the common pattern of creating an empty list and using a `for` loop to fill it.

### **The Long Way (Standard Loop)**

```python
L = [2, 4, 1, 5]
M = []
for v in L:
    M.append(v**2)
# Result: [4, 16, 1, 25]

```

### **The Pythonic Way (with List Comprehension)**

```python
L = [2, 4, 1, 5]
M = [v**2 for v in L]
# Result: [4, 16, 1, 25]

```

---

## How to Build One

The general syntax is:
`[ expression for variable in iterable ]`

To understand it, it helps to read it from the **middle** out:

1. **`for variable in iterable`**: The loop that looks at every item.
2. **`expression`**: What to do to that item before adding it to the new list.

### Example using `range()`

```python
M = [v**2 for v in range(5)]
print(M)  # [0, 1, 4, 9, 16]

```

---

## **Adding a Filter (The `if` clause)**

You can add an `if` statement to the end to decide which items actually make it into the new list.

**Syntax:** `[ expression for variable in iterable if condition ]`

### **Example:**

```python
L = [2, 4, 1, 5]
# "for every v in L, but ONLY if v is even: Square v, "
M = [v**2 for v in L if v % 2 == 0]
print(M)  # [4, 16] (1 and 5 were ignored)

```

---

## **Checkpoint**

Given this standard loop:

```python
M = []
for v in L:
    if v % 2 == 1:
        M.append(v * 10)

```

**Which list comprehension does the same thing?**
* A. `M = [ for v in L: if v%2 == 1: v*10 ]`
* B. `M = [ v*10 for v in L ] if (v%2 == 1)`
* C. `M = [ v*10 for v in L if v%2 == 1 ]`
* D. `[ if v%2 == 1 then v*10 for v in L ]`

   <details>
   <summary><b>Answer</b></summary>
   <blockquote>
   <b>C. <code>M = [ v10 for v in L if v%2 == 1 ]</code></b>

   This follows the correct Python order: 1. The result (<code>v10</code>), 2. The loop (<code>for v in L</code>), and 3. The filter (<code>if v%2 == 1</code>).
   </blockquote>
   </details>

---

> [!NOTE]
> **TLDR:** 
> 1. Use comprehensions for **simple** transformations.
> 2. If your comprehension is longer than one line or has nested logic, use a **regular for loop** for readability.
> 3. Remember: `[ <What to add> | <The loop> | <The filter> ]`



